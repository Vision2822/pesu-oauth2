{% extends "layout.html" %}
{% block title %}Authorize Access{% endblock %}
{% block content %}
<div class="container" style="max-width: 500px;">
    <div class="card" style="background-color: #111; border-color: var(--bs-border-color);">
        <div class="card-header text-center border-bottom-0 pt-4">
            <h4 class="fw-bold">Authorize Application</h4>
        </div>
        <div class="card-body p-4">
            <p class="text-center">
                <strong>{{ grant.client.client_name }}</strong> wants to access your account.
            </p>
            <p class="text-muted text-center small">Logged in as: {{ user.profile_data.name }} ({{ user.pesuprn }})</p>
            <hr style="border-color: var(--bs-border-color);">
            <p>This application will be able to:</p>

            <ul class="list-group list-group-flush mb-4">
                {% for scope in grant.request.scope.split() %}
                    {% if scope in available_scopes %}
                    <li class="list-group-item" style="background-color: transparent;">
                        {{ available_scopes[scope] }}
                    </li>
                    {% endif %}
                {% endfor %}
            </ul>

            <form method="post">
                <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                    <button type="submit" name="confirm" value="true" class="btn btn-primary px-4">Allow</button>
                    <button type="submit" name="confirm" value="" class="btn btn-outline-secondary px-4">Deny</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
